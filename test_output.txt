
> expense-buddy@1.8.0 test
> jest services/sync-manager-timestamp.test.ts

FAIL services/sync-manager-timestamp.test.ts
  Sync Manager Timestamp Verification
    ├ù autoSync uses server timestamp when commit is made (9 ms)
    ΓêÜ determineSyncDirection returns in_sync when timestamps match (1 ms)
    ΓêÜ determineSyncDirection returns pull when remote is newer

  ΓùÅ Sync Manager Timestamp Verification ΓÇ║ autoSync uses server timestamp when commit is made

    expect(received).toBe(expected) // Object.is equality

    Expected: "2024-01-02T12:00:00Z"
    Received: "2026-01-06T09:09:06.845Z"

      123 |     // Verify storage has the authoritative timestamp (from getLatestCommitTimestamp)
      124 |     const storedTime = mockStorage.get("last_sync_time")
    > 125 |     expect(storedTime).toBe(remoteTimestamp)
          |                        ^
      126 |   })
      127 |
      128 |   test("determineSyncDirection returns in_sync when timestamps match", async () => {

      at Object.toBe (services/sync-manager-timestamp.test.ts:125:24)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 2 passed, 3 total
Snapshots:   0 total
Time:        2.741 s, estimated 6 s
Ran all test suites matching /services\\sync-manager-timestamp.test.ts/i.
